<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å±…å®¶é•¿æŠ¤è¯„ä¼°ç³»ç»Ÿ - ç®¡ç†äººå‘˜ç«¯</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        /* åŸºç¡€æ ·å¼ï¼ˆå¤ç”¨å¹¶æ‰©å±•ï¼‰ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
        }
        
        :root {
            --primary-color: #2f80ed;
            --success-color: #52c41a;
            --warning-color: #faad14;
            --danger-color: #ff4d4f;
            --text-color: #333;
            --text-secondary: #666;
            --text-tertiary: #999;
            --border-color: #ddd;
            --card-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            --bg-color: #f5f7fa;
            --progress-normal: #52c41a;
            --progress-warning: #faad14;
            --progress-danger: #ff4d4f;
        }
        
        body {
            background-color: var(--bg-color);
            font-size: 14px;
            color: var(--text-color);
            padding-bottom: 60px;
        }
        
        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .nav-bar {
            height: 44px;
            line-height: 44px;
            background-color: var(--primary-color);
            color: #fff;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 999;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            box-sizing: border-box;
        }
        
        .nav-back {
            font-size: 18px;
            cursor: pointer;
            flex-shrink: 0;
            width: 30px;
        }
        
        .nav-title {
            font-weight: 500;
            flex: 1;
            text-align: center;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            pointer-events: none;
        }
        
        .nav-right {
            font-size: 14px;
            color: #fff;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        #roleSwitchBtn {
            position: relative;
            cursor: pointer;
        }
        
        /* é€šçŸ¥é“ƒé“›å›¾æ ‡ */
        .notification-icon {
            position: relative;
            font-size: 20px;
            color: #fff;
            cursor: pointer;
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 18px;
            height: 18px;
            background: #ff4d4f;
            color: #fff;
            border-radius: 50%;
            font-size: 11px;
            text-align: center;
            line-height: 18px;
            font-weight: 600;
            border: 2px solid var(--primary-color);
        }
        
        /* å¾…å®Œæˆå·¥ä½œå¼¹çª— */
        .work-reminder-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .work-reminder-modal.show {
            display: flex;
        }
        
        .work-reminder-content {
            background: #fff;
            border-radius: 12px;
            width: 85%;
            max-width: 400px;
            max-height: 70vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .work-reminder-header {
            padding: 18px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .work-reminder-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
        
        .work-reminder-close {
            font-size: 24px;
            color: #999;
            cursor: pointer;
            line-height: 1;
        }
        
        .work-reminder-body {
            padding: 20px;
            overflow-y: auto;
            flex: 1;
        }
        
        .work-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .work-item:last-child {
            border-bottom: none;
        }
        
        .work-item-title {
            font-size: 15px;
            font-weight: 500;
            color: #333;
            margin-bottom: 6px;
        }
        
        .work-item-desc {
            font-size: 13px;
            color: #666;
            line-height: 1.5;
        }
        
        .work-item-count {
            display: inline-block;
            background: #ff4d4f;
            color: #fff;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 8px;
        }
        
        .work-reminder-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            text-align: center;
        }
        
        .work-reminder-btn {
            background: var(--primary-color);
            color: #fff;
            border: none;
            padding: 10px 40px;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
        }
        /* è§’è‰²åˆ‡æ¢ä¸‹æ‹‰èœå•ï¼ˆAPPç«¯ï¼‰ */
        .role-switch-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 180px;
            z-index: 1000;
            display: none;
            overflow: hidden;
        }
        .role-switch-dropdown.show {
            display: block;
        }
        .role-switch-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #f0f0f0;
        }
        .role-switch-item:last-child {
            border-bottom: none;
        }
        .role-switch-item:active {
            background-color: #f0f7ff;
        }
        .role-switch-item.active {
            background-color: #e6f7ff;
            color: #2f80ed;
        }
        .role-switch-item .role-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f0f0f0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            margin-right: 12px;
        }
        .role-switch-item.active .role-icon {
            background: #2f80ed;
            color: #fff;
        }
        .role-switch-item .role-name {
            flex: 1;
            font-size: 14px;
        }
        
        /* åº•éƒ¨åŠŸèƒ½èœå• */
        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background-color: #fff;
            border-top: 1px solid var(--border-color);
            display: flex;
            z-index: 998;
        }
        
        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: var(--text-tertiary);
            padding-top: 5px;
            cursor: pointer;
        }
        
        .tab-item.active {
            color: var(--primary-color);
        }
        
        .tab-icon {
            font-size: 20px;
            margin-bottom: 2px;
        }
        
        /* å†…å®¹å®¹å™¨ */
        .content {
            padding: 54px 15px 60px;
        }
        
        /* åŠŸèƒ½å¡ç‰‡ */
        .function-card {
            background-color: #fff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--card-shadow);
        }
        
        .card-title {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-more {
            font-size: 12px;
            color: var(--primary-color);
            cursor: pointer;
        }
        
        /* æœç´¢æ¡† */
        .search-box {
            position: relative;
            margin-bottom: 15px;
        }
        
        .search-input {
            width: 100%;
            padding: 10px 15px 10px 35px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 14px;
            background-color: #fff;
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-tertiary);
        }
        
        /* åˆ—è¡¨é¡¹æ ·å¼ */
        .list-item {
            padding: 12px;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .list-item:last-child {
            border-bottom: none;
        }
        
        .list-item:hover {
            background-color: #f9f9f9;
        }
        
        .item-info {
            flex: 1;
        }
        
        .item-title {
            font-weight: 500;
            font-size: 15px;
            margin-bottom: 4px;
        }
        
        .item-subtitle {
            font-size: 12px;
            color: var(--text-tertiary);
        }
        
        .item-tag {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            background-color: #f5f7fa;
            color: var(--primary-color);
        }
        
        .item-arrow {
            color: var(--text-tertiary);
            font-size: 16px;
        }
        
        /* æœåŠ¡å¯¹è±¡è¯¦æƒ…é¡µæ ·å¼ */
        .detail-header {
            background-color: #fff;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
        }
        
        .detail-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
        }
        
        .info-label {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-bottom: 3px;
        }
        
        .info-value {
            font-size: 14px;
        }
        
        /* è¿›åº¦æ¡æ ·å¼ */
        .progress-section {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .progress-title {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .progress-bar {
            height: 8px;
            background-color: #f5f5f5;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s;
        }
        
        .progress-fill.normal {
            background-color: var(--progress-normal);
        }
        
        .progress-fill.warning {
            background-color: var(--progress-warning);
        }
        
        .progress-fill.danger {
            background-color: var(--progress-danger);
        }
        
        .progress-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        /* æœåŠ¡è®°å½•åˆ—è¡¨ */
        .record-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .record-item:last-child {
            border-bottom: none;
        }
        
        .record-left {
            flex: 1;
        }
        
        .record-date {
            font-weight: 500;
            margin-bottom: 6px;
            font-size: 15px;
        }
        
        .record-nurse {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-bottom: 4px;
        }
        
        .record-time-info {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 6px;
        }
        
        .record-time-row {
            display: flex;
            align-items: center;
            margin-bottom: 3px;
        }
        
        .record-time-label {
            color: var(--text-tertiary);
            min-width: 70px;
        }
        
        .record-time-value {
            color: var(--text-color);
            font-weight: 500;
        }
        
        .record-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            justify-content: center;
            color: var(--primary-color);
            font-weight: 500;
            min-width: 60px;
        }
        
        .record-duration {
            font-size: 15px;
            margin-bottom: 4px;
        }
        
        /* æŠ¤ç†å‘˜å·¥ä½œæ•°æ®é¡µé¢ */
        .date-selector {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            background-color: #fff;
            padding: 12px 15px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
        }
        
        .date-btn {
            padding: 8px 12px;
            background-color: #f5f7fa;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            border: none;
            color: var(--text-color);
        }
        
        .date-btn:active {
            background-color: #e8e8e8;
        }
        
        .date-display {
            font-weight: 500;
            font-size: 15px;
        }
        
        .view-mode-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .mode-btn {
            flex: 1;
            padding: 10px;
            background-color: #fff;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background-color: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
        }
        
        /* æŒ‰æ—¥å·¥å•åˆ—è¡¨ */
        .daily-workorder-list {
            display: none;
        }
        
        .daily-workorder-list.show {
            display: block;
        }
        
        .daily-workorder-item {
            background-color: #fff;
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 10px;
            box-shadow: var(--card-shadow);
        }
        
        .workorder-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .workorder-client {
            font-weight: 500;
            font-size: 15px;
        }
        
        .workorder-status {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .status-completed {
            background-color: #e6f7ff;
            color: var(--primary-color);
        }
        
        .status-pending {
            background-color: #fff7e6;
            color: var(--warning-color);
        }
        
        .status-progress {
            background-color: #f6ffed;
            color: var(--success-color);
        }
        
        .workorder-time {
            display: flex;
            flex-direction: column;
            gap: 4px;
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 8px;
        }
        
        .workorder-time-row {
            display: flex;
            align-items: center;
        }
        
        .workorder-time-label {
            min-width: 70px;
            color: var(--text-tertiary);
        }
        
        .workorder-time-value {
            color: var(--text-color);
            font-weight: 500;
        }
        
        .workorder-duration {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #f5f5f5;
            font-size: 13px;
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .stat-card {
            background-color: #fff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .stat-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            text-align: center;
        }
        
        .stat-item {
            padding: 10px;
            background-color: #f5f7fa;
            border-radius: 6px;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: 500;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 12px;
            color: var(--text-tertiary);
        }
        
        /* å®¡æ‰¹é¡µé¢æ ·å¼ */
        .tabs {
            display: flex;
            background-color: #fff;
            border-radius: 8px 8px 0 0;
            overflow: hidden;
            flex-wrap: wrap;
        }
        
        .tab {
            flex: 1;
            min-width: 80px;
            text-align: center;
            padding: 12px 8px;
            font-size: 13px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            position: relative;
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            font-weight: 500;
        }
        
        .badge {
            display: inline-block;
            background-color: var(--danger-color);
            color: #fff;
            font-size: 10px;
            padding: 1px 5px;
            border-radius: 8px;
            margin-left: 5px;
        }
        
        /* æµç¨‹ç®¡ç†æ ·å¼ */
        .process-form-section {
            margin-top: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 6px;
            color: var(--text-color);
        }
        
        .form-label .required {
            color: var(--danger-color);
            margin-left: 3px;
        }
        
        .form-control, .form-select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            background-color: #fff;
        }
        
        .form-textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            min-height: 80px;
            resize: vertical;
            font-family: inherit;
        }
        
        .process-list-item {
            background-color: #fff;
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 10px;
            box-shadow: var(--card-shadow);
        }
        
        .process-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .process-type-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .process-type-pause {
            background-color: #fff7e6;
            color: var(--warning-color);
        }
        
        .process-type-resume {
            background-color: #e6f7ff;
            color: var(--primary-color);
        }
        
        .process-type-transfer {
            background-color: #f6ffed;
            color: var(--success-color);
        }
        
        .process-type-death {
            background-color: #fff1f0;
            color: var(--danger-color);
        }
        
        .process-info-row {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        .process-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 10px;
        }
        
        .process-status {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }
        
        .status-pending {
            background-color: #fff7e6;
            color: var(--warning-color);
        }
        
        .status-processing {
            background-color: #e6f7ff;
            color: var(--primary-color);
        }
        
        .status-approved {
            background-color: #f6ffed;
            color: var(--success-color);
        }
        
        .status-rejected {
            background-color: #fff1f0;
            color: var(--danger-color);
        }
        
        /* æœåŠ¡ä¸è¶³çªå‡ºæ˜¾ç¤ºæ ·å¼ */
        .service-insufficient {
            background-color: #fff7e6 !important;
            border-left: 4px solid var(--warning-color) !important;
            position: relative;
        }
        
        .service-insufficient-badge {
            display: inline-block;
            background-color: var(--warning-color);
            color: #fff;
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            font-weight: 500;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        .service-count-info {
            font-size: 12px;
            color: var(--warning-color);
            font-weight: 500;
            margin-top: 4px;
        }
        
        .approval-item {
            padding: 12px;
            border-bottom: 1px solid #f5f5f5;
            background-color: #fff;
        }
        
        .approval-item:first-child {
            border-radius: 0 0 8px 8px;
        }
        
        .approval-type {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 8px;
        }
        
        .type-pause {
            background-color: #fff7e6;
            color: var(--warning-color);
        }
        
        .type-resume {
            background-color: #e8f4ff;
            color: var(--primary-color);
        }
        
        .type-death {
            background-color: #fff1f0;
            color: var(--danger-color);
        }
        
        .approval-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .approval-time {
            font-size: 12px;
            color: var(--text-tertiary);
        }
        
        .approval-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 10px;
        }
        
        .approve-btn {
            padding: 5px 15px;
            border-radius: 4px;
            font-size: 13px;
            border: none;
            cursor: pointer;
        }
        
        .btn-approve {
            background-color: var(--success-color);
            color: #fff;
        }
        
        .btn-reject {
            background-color: var(--danger-color);
            color: #fff;
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ï¼ˆå¤ç”¨ï¼‰ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: #fff;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            transform: translateY(-20px);
            transition: all 0.3s;
        }
        
        .modal.show .modal-content {
            transform: translateY(0);
        }
        
        .modal-header {
            padding: 15px;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 16px;
            font-weight: 500;
        }
        
        .modal-close {
            font-size: 20px;
            color: var(--text-tertiary);
            cursor: pointer;
        }
        
        .modal-body {
            padding: 15px;
        }
        
        .modal-footer {
            padding: 12px 15px;
            border-top: 1px solid #f5f5f5;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .modal-btn {
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
            border: none;
        }
        
        .btn-cancel {
            background-color: #f5f5f5;
            color: var(--text-secondary);
        }
        
        .btn-confirm {
            background-color: var(--primary-color);
            color: #fff;
        }
        
        /* æç¤ºæ¡†ï¼ˆå¤ç”¨ï¼‰ */
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(0,0,0,0.7);
            color: #fff;
            padding: 10px 20px;
            border-radius: 4px;
            font-size: 14px;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .toast.show {
            opacity: 1;
            visibility: visible;
        }
        
        /* å›¾è¡¨å®¹å™¨ */
        .chart-container {
            height: 200px;
            margin-top: 15px;
            position: relative;
        }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state {
            padding: 40px 20px;
            text-align: center;
            color: var(--text-tertiary);
            font-size: 13px;
        }
        
        .empty-icon {
            font-size: 40px;
            margin-bottom: 10px;
            color: #ddd;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .action-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: #fff;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="nav-bar">
        <div class="nav-back" onclick="goBack()">â†</div>
        <div class="nav-title" id="pageTitle">ç®¡ç†é¦–é¡µ</div>
        <div class="nav-right">
            <div class="notification-icon" id="notificationIcon" onclick="showWorkReminder()">
                <i class="fa fa-bell-o"></i>
                <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
            </div>
            <div id="roleSwitchBtn" style="position: relative;">è®¾ç½®
                <!-- è§’è‰²åˆ‡æ¢ä¸‹æ‹‰èœå• -->
                <div class="role-switch-dropdown" id="roleSwitchDropdown">
                    <div class="role-switch-item" data-role="admin" data-path="../ç³»ç»Ÿç®¡ç†å‘˜/index.html">
                        <div class="role-icon">ç®¡</div>
                        <div class="role-name">ç³»ç»Ÿç®¡ç†å‘˜</div>
                    </div>
                    <div class="role-switch-item" data-role="director" data-path="../æœºæ„è´Ÿè´£äºº/index.html">
                        <div class="role-icon">è´Ÿ</div>
                        <div class="role-name">æœºæ„è´Ÿè´£äºº</div>
                    </div>
                    <div class="role-switch-item" data-role="supervisor" data-path="../æœåŠ¡ä¸»ç®¡/index.html">
                        <div class="role-icon">ä¸»</div>
                        <div class="role-name">æœåŠ¡ä¸»ç®¡</div>
                    </div>
                    <div class="role-switch-item" data-role="archivist" data-path="../æ¡£æ¡ˆç®¡ç†å‘˜.html/index.html">
                        <div class="role-icon">æ¡£</div>
                        <div class="role-name">æ¡£æ¡ˆç®¡ç†å‘˜</div>
                    </div>
                    <div class="role-switch-item" data-role="evaluator" data-path="../è¯„ä¼°å‘˜/index.html">
                        <div class="role-icon">åŠ©</div>
                        <div class="role-name">ååŠ©ç”³è¯·å‘˜</div>
                    </div>
                    <div class="role-switch-item" data-role="scheduler" data-path="../æ’å•å‘˜/index.html">
                        <div class="role-icon">æ’</div>
                        <div class="role-name">æ’å•å‘˜</div>
                    </div>
                    <div class="role-switch-item" data-role="adminApp" data-path="index.html">
                        <div class="role-icon">ç®¡</div>
                        <div class="role-name">ç®¡ç†å‘˜APP</div>
                    </div>
                    <div class="role-switch-item" data-role="evaluatorApp" data-path="../è¯„ä¼°å‘˜APP/index.html">
                        <div class="role-icon">åŠ©</div>
                        <div class="role-name">ååŠ©ç”³è¯·å‘˜APP</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- é¦–é¡µå†…å®¹ -->
    <div class="content" id="homePage">
        <!-- åŠŸèƒ½å…¥å£å¡ç‰‡ -->
        <div class="function-card">
            <div class="card-title">æœåŠ¡ç®¡ç†</div>
            <div class="list-item" onclick="navigateTo('serviceObject')">
                <div class="item-info">
                    <div class="item-title">æœåŠ¡å¯¹è±¡è¯¦æƒ…</div>
                    <div class="item-subtitle">æŸ¥çœ‹æœåŠ¡å¯¹è±¡ä¿¡æ¯ä¸æœåŠ¡è®°å½•</div>
                </div>
                <div class="item-arrow">â†’</div>
            </div>
            <div class="list-item" onclick="navigateTo('nurseWork')">
                <div class="item-info">
                    <div class="item-title">æŠ¤ç†å‘˜å·¥ä½œæŸ¥çœ‹</div>
                    <div class="item-subtitle">æŸ¥çœ‹æŠ¤ç†å‘˜å·¥ä½œæ•°æ®ä¸ç»Ÿè®¡</div>
                </div>
                <div class="item-arrow">â†’</div>
            </div>
        </div>
        
        <div class="function-card">
            <div class="card-title">æµç¨‹ç®¡ç†</div>
            <div class="list-item" onclick="navigateTo('approval')">
                <div class="item-info">
                    <div class="item-title">æµç¨‹ç®¡ç†</div>
                    <div class="item-subtitle">å‘èµ·æµç¨‹ã€å®¡æ‰¹æµç¨‹ã€æŸ¥çœ‹æµç¨‹çŠ¶æ€</div>
                </div>
                <div class="item-tag">5</div>
                <div class="item-arrow">â†’</div>
            </div>
        </div>
        
        <div class="function-card">
            <div class="card-title">ååŠ©ç”³è¯·å‘˜åŠŸèƒ½</div>
            <div class="list-item" onclick="navigateTo('evaluatorClue')">
                <div class="item-info">
                    <div class="item-title">å¾…ååŠ©ç”³è¯·çº¿ç´¢</div>
                    <div class="item-subtitle">æŸ¥çœ‹å’Œç®¡ç†ååŠ©ç”³è¯·çº¿ç´¢</div>
                </div>
                <div class="item-tag">12</div>
                <div class="item-arrow">â†’</div>
            </div>
            <div class="list-item" onclick="navigateTo('evaluatorRegister')">
                <div class="item-info">
                    <div class="item-title">ä¸Šé—¨ååŠ©ç”³è¯·æ“ä½œ</div>
                    <div class="item-subtitle">çº¿ä¸‹ååŠ©ç”³è¯·ä¿¡æ¯å½•å…¥</div>
                </div>
                <div class="item-arrow">â†’</div>
            </div>
            <div class="list-item" onclick="navigateTo('evaluatorConclusion')">
                <div class="item-info">
                    <div class="item-title">ç»“è®ºä¹¦é€è¾¾</div>
                    <div class="item-subtitle">ååŠ©ç”³è¯·ç»“è®ºä¹¦é€è¾¾</div>
                </div>
                <div class="item-tag">2</div>
                <div class="item-arrow">â†’</div>
            </div>
            <div class="list-item" onclick="navigateTo('evaluatorVisit')">
                <div class="item-info">
                    <div class="item-title">å›è®¿åŠŸèƒ½</div>
                    <div class="item-subtitle">çº¿ä¸Šçº¿ä¸‹å›è®¿æ‰§è¡Œ</div>
                </div>
                <div class="item-tag">3</div>
                <div class="item-arrow">â†’</div>
            </div>
        </div>
        
        <!-- å¾…åŠäº‹é¡¹å¡ç‰‡ -->
        <div class="function-card">
            <div class="card-title">å¾…åŠäº‹é¡¹</div>
            <div class="list-item">
                <div class="item-info">
                    <div class="item-title">å¾…å®¡æ‰¹ç”³è¯·</div>
                    <div class="item-subtitle">3æ¡æš‚åœ/æ¢å¤ç”³è¯·å¾…å¤„ç†</div>
                </div>
                <div class="item-tag">3</div>
                <div class="item-arrow">â†’</div>
            </div>
            <div class="list-item">
                <div class="item-info">
                    <div class="item-title">æœåŠ¡æ—¶é•¿é¢„è­¦</div>
                    <div class="item-subtitle">5ä½æœåŠ¡å¯¹è±¡å‰©ä½™æ—¶é•¿ä¸è¶³10%</div>
                </div>
                <div class="item-tag">5</div>
                <div class="item-arrow">â†’</div>
            </div>
        </div>
    </div>

    <!-- æœåŠ¡å¯¹è±¡ç®¡ç†é¡µé¢ -->
    <div class="content" id="serviceObjectPage" style="display: none;">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" placeholder="è¾“å…¥å§“å/è¡Œæ”¿åŒºåŸŸæœç´¢">
        </div>
        
        <div class="function-card">
            <div class="card-title">æœ€è¿‘æŸ¥çœ‹</div>
            <div id="recentViewList">
                <!-- åŠ¨æ€ç”Ÿæˆï¼Œæ”¯æŒæœåŠ¡ä¸è¶³çªå‡ºæ˜¾ç¤º -->
            </div>
        </div>
        
        <div class="function-card">
            <div class="card-title">æœåŠ¡å¯¹è±¡åˆ—è¡¨ <span class="card-more">å…¨éƒ¨</span></div>
            <div id="objectListContainer">
                <!-- åŠ¨æ€ç”Ÿæˆï¼Œæ”¯æŒæœåŠ¡ä¸è¶³çªå‡ºæ˜¾ç¤º -->
            </div>
        </div>
    </div>

    <!-- æœåŠ¡å¯¹è±¡è¯¦æƒ…é¡µé¢ -->
    <div class="content" id="objectDetailPage" style="display: none;">
        <div class="detail-header">
            <div class="detail-title">æœåŠ¡å¯¹è±¡è¯¦æƒ… - å¼ ä¸‰</div>
            <div class="info-grid">
                <div class="info-item">
                    <div class="info-label">æ€§åˆ«</div>
                    <div class="info-value">ç”·</div>
                </div>
                <div class="info-item">
                    <div class="info-label">å¹´é¾„</div>
                    <div class="info-value">78å²</div>
                </div>
                <div class="info-item">
                    <div class="info-label">å¤±èƒ½ç­‰çº§</div>
                    <div class="info-value">é‡åº¦å¤±èƒ½ï¼ˆä¸‰çº§ï¼‰</div>
                </div>
                <div class="info-item">
                    <div class="info-label">ç­¾çº¦æ—¶é—´</div>
                    <div class="info-value">2025-01-15</div>
                </div>
                <div class="info-item">
                    <div class="info-label">è´Ÿè´£æŠ¤ç†å‘˜</div>
                    <div class="info-value">ææŠ¤ç†</div>
                </div>
                <div class="info-item">
                    <div class="info-label">è”ç³»ç”µè¯</div>
                    <div class="info-value" style="display: flex; align-items: center; gap: 8px;">
                        <span>138****5678</span>
                        <a href="tel:13800135678" style="color: var(--primary-color); text-decoration: none; font-size: 16px;">ğŸ“</a>
                    </div>
                </div>
                <div class="info-item" style="grid-column: 1 / -1;">
                    <div class="info-label">æœåŠ¡åœ°å€</div>
                    <div class="info-value" style="display: flex; align-items: center; justify-content: space-between;">
                        <span>ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå¼„XXå·</span>
                        <button onclick="openNavigation('ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå¼„XXå·')" style="padding: 4px 12px; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">å¯¼èˆª</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="progress-section">
            <div class="progress-title">
                <span>æœˆåº¦æœåŠ¡æ—¶é•¿</span>
                <span>8å°æ—¶ / 12å°æ—¶</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill warning" style="width: 67%;"></div>
            </div>
            <div class="progress-stats">
                <span>åº”æœåŠ¡ï¼š12å°æ—¶</span>
                <span>å·²æœåŠ¡ï¼š8å°æ—¶</span>
                <span>å‰©ä½™ï¼š4å°æ—¶ï¼ˆ33%ï¼‰</span>
            </div>
        </div>
        
        <div class="function-card">
            <div class="card-title">æœ€è¿‘æœåŠ¡è®°å½•</div>
            <div class="record-item">
                <div class="record-left">
                    <div class="record-date">2025-10-20</div>
                    <div class="record-nurse">æŠ¤ç†å‘˜ï¼šææŠ¤ç†</div>
                    <div class="record-time-info">
                        <div class="record-time-row">
                            <span class="record-time-label">è®¡åˆ’æ—¶é—´ï¼š</span>
                            <span class="record-time-value">09:00 - 11:00</span>
                        </div>
                        <div class="record-time-row">
                            <span class="record-time-label">å®é™…æ—¶é—´ï¼š</span>
                            <span class="record-time-value">09:05 - 11:10</span>
                        </div>
                    </div>
                </div>
                <div class="record-right">
                    <div class="record-duration">2å°æ—¶</div>
                </div>
            </div>
            <div class="record-item">
                <div class="record-left">
                    <div class="record-date">2025-10-15</div>
                    <div class="record-nurse">æŠ¤ç†å‘˜ï¼šææŠ¤ç†</div>
                    <div class="record-time-info">
                        <div class="record-time-row">
                            <span class="record-time-label">è®¡åˆ’æ—¶é—´ï¼š</span>
                            <span class="record-time-value">14:00 - 17:00</span>
                        </div>
                        <div class="record-time-row">
                            <span class="record-time-label">å®é™…æ—¶é—´ï¼š</span>
                            <span class="record-time-value">14:02 - 17:05</span>
                        </div>
                    </div>
                </div>
                <div class="record-right">
                    <div class="record-duration">3å°æ—¶</div>
                </div>
            </div>
            <div class="record-item">
                <div class="record-left">
                    <div class="record-date">2025-10-10</div>
                    <div class="record-nurse">æŠ¤ç†å‘˜ï¼šææŠ¤ç†</div>
                    <div class="record-time-info">
                        <div class="record-time-row">
                            <span class="record-time-label">è®¡åˆ’æ—¶é—´ï¼š</span>
                            <span class="record-time-value">09:00 - 12:00</span>
                        </div>
                        <div class="record-time-row">
                            <span class="record-time-label">å®é™…æ—¶é—´ï¼š</span>
                            <span class="record-time-value">09:00 - 12:00</span>
                        </div>
                    </div>
                </div>
                <div class="record-right">
                    <div class="record-duration">3å°æ—¶</div>
                </div>
            </div>
            <button class="action-btn" onclick="viewFullRecords()">æŸ¥çœ‹å®Œæ•´è®°å½•</button>
        </div>
    </div>

    <!-- æŠ¤ç†å‘˜å·¥ä½œæŸ¥çœ‹é¡µé¢ -->
    <div class="content" id="nurseWorkPage" style="display: none;">
        <div class="search-box">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" placeholder="è¾“å…¥å§“å/æœåŠ¡åŒºåŸŸæœç´¢">
        </div>
        
        <div class="function-card">
            <div class="card-title">æŠ¤ç†å‘˜åˆ—è¡¨</div>
            <div class="list-item" onclick="viewNurseWork(1)">
                <div class="item-info">
                    <div class="item-title">ææŠ¤ç†</div>
                    <div class="item-subtitle">æœåŠ¡åŒºåŸŸï¼šæµ¦ä¸œæ–°åŒº | æœåŠ¡å¯¹è±¡ï¼š8äºº</div>
                </div>
                <div class="item-arrow">â†’</div>
            </div>
            <div class="list-item" onclick="viewNurseWork(2)">
                <div class="item-info">
                    <div class="item-title">ç‹æŠ¤ç†</div>
                    <div class="item-subtitle">æœåŠ¡åŒºåŸŸï¼šå¾æ±‡åŒº | æœåŠ¡å¯¹è±¡ï¼š6äºº</div>
                </div>
                <div class="item-arrow">â†’</div>
            </div>
            <div class="list-item" onclick="viewNurseWork(3)">
                <div class="item-info">
                    <div class="item-title">å¼ æŠ¤ç†</div>
                    <div class="item-subtitle">æœåŠ¡åŒºåŸŸï¼šé»„æµ¦åŒº | æœåŠ¡å¯¹è±¡ï¼š7äºº</div>
                </div>
                <div class="item-arrow">â†’</div>
            </div>
        </div>
    </div>

    <!-- æŠ¤ç†å‘˜å·¥ä½œæ•°æ®é¡µé¢ -->
    <div class="content" id="nurseDataPage" style="display: none;">
        <div class="date-selector">
            <div class="date-btn" onclick="prevDate()">â†</div>
            <div class="date-display" id="nurseDateDisplay">2025å¹´10æœˆ</div>
            <div class="date-btn" onclick="nextDate()">â†’</div>
        </div>
        
        <!-- æŸ¥çœ‹æ¨¡å¼åˆ‡æ¢ -->
        <div class="view-mode-toggle">
            <div class="mode-btn active" id="monthModeBtn" onclick="switchViewMode('month')">æŒ‰æœˆæŸ¥çœ‹</div>
            <div class="mode-btn" id="dayModeBtn" onclick="switchViewMode('day')">æŒ‰æ—¥æŸ¥çœ‹</div>
        </div>
        
        <!-- æŒ‰æ—¥æŸ¥çœ‹æ¨¡å¼ -->
        <div class="daily-workorder-list" id="dailyWorkorderList">
            <div class="stat-card">
                <div class="card-title">é€‰æ‹©æ—¥æœŸæŸ¥çœ‹å·¥å•è¯¦æƒ…</div>
                <div style="padding: 15px;">
                    <input type="date" id="dailyWorkorderDate" class="search-input" style="width: 100%; padding: 10px;" onchange="loadDailyWorkorders()">
                </div>
            </div>
            <div id="dailyWorkorderContent">
                <!-- å·¥å•åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <!-- æŒ‰æœˆæŸ¥çœ‹æ¨¡å¼ -->
        <div class="month-view-content" id="monthViewContent">
        <div class="stat-card">
            <div class="card-title">å½“æ—¥å·¥å•ç»Ÿè®¡ (2025-10-20)</div>
            <div class="stat-grid">
                <div class="stat-item">
                    <div class="stat-value">3</div>
                    <div class="stat-label">è®¡åˆ’å·¥å•</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">2</div>
                    <div class="stat-label">å·²å®Œæˆ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">0</div>
                    <div class="stat-label">å¼‚å¸¸å·¥å•</div>
                </div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="card-title">è´Ÿè´£æœåŠ¡å¯¹è±¡</div>
            <div class="list-item">
                <div class="item-info">
                    <div class="item-title">å¼ ä¸‰</div>
                    <div class="item-subtitle">é‡åº¦å¤±èƒ½ï¼ˆä¸‰çº§ï¼‰</div>
                    <div class="item-subtitle" style="margin-top: 4px; font-size: 12px; color: var(--text-secondary);">
                        ğŸ“ ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå¼„XXå· | ğŸ“ 138****5678
                    </div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 4px;">
                    <div class="item-tag">æœˆåº¦ï¼š8/12å°æ—¶</div>
                    <button onclick="openNavigation('ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå¼„XXå·')" style="padding: 4px 12px; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">å¯¼èˆª</button>
                </div>
            </div>
            <div class="list-item">
                <div class="item-info">
                    <div class="item-title">èµµå…­</div>
                    <div class="item-subtitle">é‡åº¦å¤±èƒ½ï¼ˆä¸‰çº§ï¼‰</div>
                    <div class="item-subtitle" style="margin-top: 4px; font-size: 12px; color: var(--text-secondary);">
                        ğŸ“ ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå· | ğŸ“ 136****8901
                    </div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 4px;">
                    <div class="item-tag">æœˆåº¦ï¼š6/10å°æ—¶</div>
                    <button onclick="openNavigation('ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå·')" style="padding: 4px 12px; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">å¯¼èˆª</button>
                </div>
            </div>
            <div class="list-item">
                <div class="item-info">
                    <div class="item-title">å´å…«</div>
                    <div class="item-subtitle">è½»åº¦å¤±èƒ½ï¼ˆä¸€çº§ï¼‰</div>
                    <div class="item-subtitle" style="margin-top: 4px; font-size: 12px; color: var(--text-secondary);">
                        ğŸ“ ä¸Šæµ·å¸‚é»„æµ¦åŒºXXè·¯XXå· | ğŸ“ 134****0123
                    </div>
                </div>
                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 4px;">
                    <div class="item-tag">æœˆåº¦ï¼š4/8å°æ—¶</div>
                    <button onclick="openNavigation('ä¸Šæµ·å¸‚é»„æµ¦åŒºXXè·¯XXå·')" style="padding: 4px 12px; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">å¯¼èˆª</button>
                </div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="card-title">æœˆåº¦å·¥æ—¶ç»Ÿè®¡</div>
            <div class="progress-title">
                <span>æ€»æœåŠ¡æ—¶é•¿</span>
                <span>86å°æ—¶ / 100å°æ—¶</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill normal" style="width: 86%;"></div>
            </div>
            <div class="chart-container" id="workHourChart">
                <!-- è¿™é‡Œå¯ä»¥é›†æˆChart.jsæˆ–å…¶ä»–å›¾è¡¨åº“ -->
                <div style="display: flex; align-items: flex-end; height: 100%; justify-content: space-between; padding: 0 5px;">
                    <div style="width: 10px; background-color: #e8f4ff; height: 60%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 40%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 80%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 50%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 100%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 70%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 90%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 60%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 40%;"></div>
                    <div style="width: 10px; background-color: #e8f4ff; height: 70%;"></div>
                </div>
            </div>
        </div>
        </div>
        <!-- æŒ‰æœˆæŸ¥çœ‹æ¨¡å¼ç»“æŸ -->
    </div>

    <!-- å®¡æ‰¹ç®¡ç†é¡µé¢ï¼ˆæµç¨‹ç®¡ç†ï¼‰ -->
    <div class="content" id="approvalPage" style="display: none;">
        <div class="tabs">
            <div class="tab active" onclick="switchProcessTab('new')">æ–°å‘èµ·</div>
            <div class="tab" onclick="switchProcessTab('pending')">å¾…å¤„ç† <span class="badge">3</span></div>
            <div class="tab" onclick="switchProcessTab('waiting')">å¾…å®¡æ‰¹ <span class="badge">2</span></div>
            <div class="tab" onclick="switchProcessTab('completed')">å·²å®Œæˆ</div>
        </div>
        
        <!-- æ–°å‘èµ·æµç¨‹ -->
        <div id="newProcessTab" class="process-tab-content">
            <div class="function-card">
                <div class="card-title">å‘èµ·æ–°æµç¨‹</div>
                <div class="form-group">
                    <label class="form-label">é€‰æ‹©æœåŠ¡å¯¹è±¡ <span class="required">*</span></label>
                    <select class="form-select" id="processObjectSelect">
                        <option value="">è¯·é€‰æ‹©æœåŠ¡å¯¹è±¡</option>
                        <option value="1">å¼ ä¸‰ - 330101********1234</option>
                        <option value="2">æå›› - 330102********5678</option>
                        <option value="3">ç‹äº” - 330103********9012</option>
                        <option value="4">èµµå…­ - 330104********3456</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">æµç¨‹ç±»å‹ <span class="required">*</span></label>
                    <select class="form-select" id="processTypeSelect">
                        <option value="">è¯·é€‰æ‹©æµç¨‹ç±»å‹</option>
                        <option value="1">æš‚åœç”³è¯·</option>
                        <option value="2">æ¢å¤ç”³è¯·</option>
                        <option value="3">è½¬å‡ºç”³è¯·</option>
                        <option value="4">è½¬å…¥ç”³è¯·</option>
                        <option value="5">æ­»äº¡ç”³è¯·</option>
                        <option value="6">æ°¸ä¹…æ”¾å¼ƒ</option>
                    </select>
                </div>
                <button class="action-btn" onclick="showProcessForm()">å‘èµ·æµç¨‹</button>
            </div>
        </div>
        
        <!-- å¾…å¤„ç†æµç¨‹ï¼ˆéœ€è¦è‡ªå·±å®¡æ‰¹çš„ï¼‰ -->
        <div id="pendingProcessTab" class="process-tab-content" style="display: none;">
            <div class="process-list-item">
                <div class="process-list-header">
                    <div class="process-type-badge process-type-pause">æš‚åœç”³è¯·</div>
                    <div class="process-status status-pending">å¾…å®¡æ‰¹</div>
                </div>
                <div class="process-info-row">
                    <span>æœåŠ¡å¯¹è±¡ï¼šç‹äº”</span>
                    <span>2025-10-19 14:30</span>
                </div>
                <div class="process-info-row">
                    <span>ç”³è¯·äººï¼šå¼ æŠ¤ç†</span>
                </div>
                <div class="process-info-row">
                    <span>åŸå› ï¼šå› ç—…ä½é™¢</span>
                </div>
                <div class="process-actions">
                    <button class="approve-btn btn-reject" onclick="showRejectModal(1)">é©³å›</button>
                    <button class="approve-btn btn-approve" onclick="approveApplication(1)">é€šè¿‡</button>
                </div>
            </div>
            
            <div class="process-list-item">
                <div class="process-list-header">
                    <div class="process-type-badge process-type-resume">æ¢å¤ç”³è¯·</div>
                    <div class="process-status status-pending">å¾…å®¡æ‰¹</div>
                </div>
                <div class="process-info-row">
                    <span>æœåŠ¡å¯¹è±¡ï¼šåˆ˜ä¹</span>
                    <span>2025-10-18 09:15</span>
                </div>
                <div class="process-info-row">
                    <span>ç”³è¯·äººï¼šç‹æŠ¤ç†</span>
                </div>
                <div class="process-info-row">
                    <span>åŸå› ï¼šåº·å¤å‡ºé™¢</span>
                </div>
                <div class="process-actions">
                    <button class="approve-btn btn-reject" onclick="showRejectModal(2)">é©³å›</button>
                    <button class="approve-btn btn-approve" onclick="approveApplication(2)">é€šè¿‡</button>
                </div>
            </div>
            
            <div class="process-list-item">
                <div class="process-list-header">
                    <div class="process-type-badge process-type-death">æ­»äº¡ç”³è¯·</div>
                    <div class="process-status status-pending">å¾…å®¡æ‰¹</div>
                </div>
                <div class="process-info-row">
                    <span>æœåŠ¡å¯¹è±¡ï¼šé™ˆå</span>
                    <span>2025-10-17 16:45</span>
                </div>
                <div class="process-info-row">
                    <span>ç”³è¯·äººï¼šææŠ¤ç†</span>
                </div>
                <div class="process-info-row">
                    <span>æ­»äº¡æ—¥æœŸï¼š2025-10-16</span>
                </div>
                <div class="process-actions">
                    <button class="approve-btn btn-reject" onclick="showRejectModal(3)">é©³å›</button>
                    <button class="approve-btn btn-approve" onclick="approveApplication(3)">é€šè¿‡</button>
                </div>
            </div>
        </div>
        
        <!-- å¾…å®¡æ‰¹æµç¨‹ï¼ˆè‡ªå·±å‘èµ·ç­‰å¾…åˆ«äººå®¡æ‰¹çš„ï¼‰ -->
        <div id="waitingProcessTab" class="process-tab-content" style="display: none;">
            <div class="process-list-item">
                <div class="process-list-header">
                    <div class="process-type-badge process-type-transfer">è½¬å‡ºç”³è¯·</div>
                    <div class="process-status status-processing">å®¡æ‰¹ä¸­</div>
                </div>
                <div class="process-info-row">
                    <span>æœåŠ¡å¯¹è±¡ï¼šèµµå…­</span>
                    <span>2025-10-13 14:15</span>
                </div>
                <div class="process-info-row">
                    <span>å½“å‰å®¡æ‰¹äººï¼šæœºæ„è´Ÿè´£äºº</span>
                </div>
                <div class="process-info-row">
                    <span>åŸå› ï¼šæœåŠ¡å¯¹è±¡å› æ¬è¿éœ€è¦è½¬å‡º</span>
                </div>
            </div>
            
            <div class="process-list-item">
                <div class="process-list-header">
                    <div class="process-type-badge process-type-pause">æš‚åœç”³è¯·</div>
                    <div class="process-status status-processing">å®¡æ‰¹ä¸­</div>
                </div>
                <div class="process-info-row">
                    <span>æœåŠ¡å¯¹è±¡ï¼šé’±ä¸ƒ</span>
                    <span>2025-10-12 11:00</span>
                </div>
                <div class="process-info-row">
                    <span>å½“å‰å®¡æ‰¹äººï¼šæœºæ„è´Ÿè´£äºº</span>
                </div>
                <div class="process-info-row">
                    <span>åŸå› ï¼šæœåŠ¡å¯¹è±¡æš‚æ—¶ä¸­æ­¢æœåŠ¡</span>
                </div>
            </div>
        </div>
        
        <!-- å·²å®Œæˆæµç¨‹ -->
        <div id="completedProcessTab" class="process-tab-content" style="display: none;">
            <div class="process-list-item">
                <div class="process-list-header">
                    <div class="process-type-badge process-type-resume">æ¢å¤ç”³è¯·</div>
                    <div class="process-status status-approved">å·²é€šè¿‡</div>
                </div>
                <div class="process-info-row">
                    <span>æœåŠ¡å¯¹è±¡ï¼šå­™å…«</span>
                    <span>2025-10-10 08:30</span>
                </div>
                <div class="process-info-row">
                    <span>å®Œæˆæ—¶é—´ï¼š2025-10-11 16:20</span>
                </div>
                <div class="process-info-row">
                    <span>åŸå› ï¼šæœåŠ¡å¯¹è±¡å·²åº·å¤å‡ºé™¢</span>
                </div>
            </div>
            
            <div class="process-list-item">
                <div class="process-list-header">
                    <div class="process-type-badge process-type-pause">æš‚åœç”³è¯·</div>
                    <div class="process-status status-rejected">å·²é©³å›</div>
                </div>
                <div class="process-info-row">
                    <span>æœåŠ¡å¯¹è±¡ï¼šå‘¨ä¹</span>
                    <span>2025-10-08 10:00</span>
                </div>
                <div class="process-info-row">
                    <span>å®Œæˆæ—¶é—´ï¼š2025-10-09 14:30</span>
                </div>
                <div class="process-info-row">
                    <span>åŸå› ï¼šæœåŠ¡å¯¹è±¡æš‚åœæœåŠ¡</span>
                </div>
            </div>
        </div>
    </div>

    <!-- é©³å›åŸå› å¼¹çª— -->
    <div class="modal" id="rejectModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">é©³å›åŸå› </div>
                <div class="modal-close" onclick="hideRejectModal()">Ã—</div>
            </div>
            <div class="modal-body">
                <textarea id="rejectReason" class="form-textarea" placeholder="è¯·è¾“å…¥é©³å›åŸå› ï¼ˆå¿…å¡«ï¼‰"></textarea>
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-cancel" onclick="hideRejectModal()">å–æ¶ˆ</button>
                <button class="modal-btn btn-confirm" onclick="confirmReject()">ç¡®è®¤é©³å›</button>
            </div>
        </div>
    </div>
    
    <!-- å‘èµ·æµç¨‹å¼¹çª— -->
    <div class="modal" id="processFormModal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <div class="modal-title" id="processFormTitle">å‘èµ·æµç¨‹</div>
                <div class="modal-close" onclick="hideProcessForm()">Ã—</div>
            </div>
            <div class="modal-body">
                <form id="processForm">
                    <input type="hidden" id="processObjectId">
                    <input type="hidden" id="processType">
                    
                    <div class="form-group">
                        <label class="form-label">æœåŠ¡å¯¹è±¡</label>
                        <input type="text" class="form-control" id="processObjectName" readonly>
                    </div>
                    
                    <div class="form-group" id="pauseFormSection" style="display: none;">
                        <label class="form-label">æš‚åœå¼€å§‹æ—¥æœŸ <span class="required">*</span></label>
                        <input type="date" class="form-control" id="pauseStartDate">
                        <label class="form-label" style="margin-top: 10px;">æš‚åœåŸå›  <span class="required">*</span></label>
                        <textarea class="form-textarea" id="pauseReason" placeholder="è¯·è¾“å…¥æš‚åœåŸå› "></textarea>
                    </div>
                    
                    <div class="form-group" id="resumeFormSection" style="display: none;">
                        <label class="form-label">æ¢å¤æ—¥æœŸ <span class="required">*</span></label>
                        <input type="date" class="form-control" id="resumeDate">
                        <label class="form-label" style="margin-top: 10px;">æ¢å¤åŸå›  <span class="required">*</span></label>
                        <textarea class="form-textarea" id="resumeReason" placeholder="è¯·è¾“å…¥æ¢å¤åŸå› "></textarea>
                    </div>
                    
                    <div class="form-group" id="deathFormSection" style="display: none;">
                        <label class="form-label">æ­»äº¡æ—¥æœŸ <span class="required">*</span></label>
                        <input type="date" class="form-control" id="deathDate">
                        <label class="form-label" style="margin-top: 10px;">æ­»äº¡åŸå›  <span class="required">*</span></label>
                        <textarea class="form-textarea" id="deathReason" placeholder="è¯·è¾“å…¥æ­»äº¡åŸå› "></textarea>
                    </div>
                    
                    <div class="form-group" id="transferFormSection" style="display: none;">
                        <label class="form-label">è½¬å‡ºæ—¥æœŸ <span class="required">*</span></label>
                        <input type="date" class="form-control" id="transferDate">
                        <label class="form-label" style="margin-top: 10px;">è½¬å‡ºåŸå›  <span class="required">*</span></label>
                        <textarea class="form-textarea" id="transferReason" placeholder="è¯·è¾“å…¥è½¬å‡ºåŸå› "></textarea>
                    </div>
                    
                    <div class="form-group" id="abandonFormSection" style="display: none;">
                        <label class="form-label">æ”¾å¼ƒæ—¥æœŸ <span class="required">*</span></label>
                        <input type="date" class="form-control" id="abandonDate">
                        <label class="form-label" style="margin-top: 10px;">æ”¾å¼ƒåŸå›  <span class="required">*</span></label>
                        <textarea class="form-textarea" id="abandonReason" placeholder="è¯·è¾“å…¥æ”¾å¼ƒåŸå› "></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-cancel" onclick="hideProcessForm()">å–æ¶ˆ</button>
                <button class="modal-btn btn-confirm" onclick="submitProcess()">æäº¤</button>
            </div>
        </div>
    </div>

    <!-- å¾…å®Œæˆå·¥ä½œæé†’å¼¹çª— -->
    <div class="work-reminder-modal" id="workReminderModal">
        <div class="work-reminder-content">
            <div class="work-reminder-header">
                <div class="work-reminder-title">ä»Šæ—¥å¾…å®Œæˆå·¥ä½œ</div>
                <div class="work-reminder-close" onclick="closeWorkReminder()">Ã—</div>
            </div>
            <div class="work-reminder-body" id="workReminderBody">
                <!-- å·¥ä½œåˆ—è¡¨å°†é€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="work-reminder-footer">
                <button class="work-reminder-btn" onclick="closeWorkReminder()">æˆ‘çŸ¥é“äº†</button>
            </div>
        </div>
    </div>

    <!-- è¯„ä¼°å‘˜åŠŸèƒ½é¡µé¢ -->
    <!-- å¾…ååŠ©ç”³è¯·çº¿ç´¢é¡µé¢ -->
    <div class="content" id="evaluatorCluePage" style="display: none;">
        <!-- ç­›é€‰æ  -->
        <div class="filter-bar" style="background-color: #fff; border-radius: 8px; padding: 12px; margin-bottom: 15px; box-shadow: var(--card-shadow);">
            <div class="filter-row" style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 10px;">
                <div class="filter-item" style="flex: 1; min-width: 120px;">
                    <label class="filter-label" style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; display: block;">å§“å</label>
                    <input type="text" class="filter-input" placeholder="è¾“å…¥å§“å" style="width: 100%; height: 34px; padding: 0 8px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 13px;">
                </div>
                <div class="filter-item" style="flex: 1; min-width: 120px;">
                    <label class="filter-label" style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px; display: block;">ç¤¾åŒº/æ‘é•‡</label>
                    <input type="text" class="filter-input" placeholder="è¾“å…¥ç¤¾åŒº" style="width: 100%; height: 34px; padding: 0 8px; border: 1px solid var(--border-color); border-radius: 4px; font-size: 13px;">
                </div>
            </div>
            <div class="filter-actions" style="display: flex; justify-content: flex-end; gap: 8px;">
                <button class="filter-btn btn-reset" style="padding: 6px 12px; border-radius: 4px; font-size: 13px; cursor: pointer; border: none; background-color: #f5f5f5; color: var(--text-secondary);">é‡ç½®</button>
                <button class="filter-btn" style="padding: 6px 12px; border-radius: 4px; font-size: 13px; cursor: pointer; border: none; background-color: var(--primary-color); color: #fff;">æŸ¥è¯¢</button>
            </div>
        </div>
        
        <!-- çº¿ç´¢åˆ—è¡¨ -->
        <div class="clue-list" style="background-color: #fff; border-radius: 8px; margin-bottom: 15px; box-shadow: var(--card-shadow);">
            <div class="list-header" style="display: flex; padding: 10px 12px; border-bottom: 1px solid #f5f5f5; font-size: 12px; color: var(--text-tertiary); font-weight: 500;">
                <div style="width: 10%;">æ—¥æœŸ</div>
                <div style="width: 8%;">å§“å</div>
                <div style="width: 12%;">ç¤¾åŒº</div>
                <div style="width: 20%;">åœ°å€</div>
                <div style="width: 12%;">ç”µè¯</div>
                <div style="width: 10%;">æ¥æº</div>
                <div style="width: 28%; text-align: center;">æ“ä½œ</div>
            </div>
            <div class="list-item" style="display: flex; padding: 12px; border-bottom: 1px solid #f5f5f5; align-items: center; cursor: pointer;">
                <div style="width: 10%; font-size: 12px; color: var(--text-secondary);">2024-05-20</div>
                <div style="width: 8%; font-size: 13px; font-weight: 500;">æå››</div>
                <div style="width: 12%; font-size: 12px; color: var(--text-secondary);">è¥¿æ¹–åŒºXXç¤¾åŒº</div>
                <div style="width: 20%; font-size: 12px; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">è¥¿æ¹–åŒºXXè¡—é“XXå°åŒº3æ ‹502å®¤</div>
                <div style="width: 12%; font-size: 12px; color: var(--text-secondary);">138****1234</div>
                <div style="width: 10%;"><span style="padding: 2px 6px; background-color: #e6f7ff; color: var(--primary-color); border-radius: 4px; font-size: 11px;">ç¤¾åŒº</span></div>
                <div style="width: 28%; text-align: center; display: flex; gap: 5px; justify-content: center;">
                    <button class="view-btn" style="padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer; background-color: #e8f4ff; color: var(--primary-color); border: none; flex: 1; max-width: 60px;">æŸ¥çœ‹</button>
                    <button class="nav-btn" style="padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer; background-color: #f0fff4; color: var(--success-color); border: none; flex: 1; max-width: 60px;">å¯¼èˆª</button>
                </div>
            </div>
            <div class="list-item" style="display: flex; padding: 12px; border-bottom: 1px solid #f5f5f5; align-items: center; cursor: pointer;">
                <div style="width: 10%; font-size: 12px; color: var(--text-secondary);">2024-05-19</div>
                <div style="width: 8%; font-size: 13px; font-weight: 500;">ç‹äº”</div>
                <div style="width: 12%; font-size: 12px; color: var(--text-secondary);">ä¸ŠåŸåŒºXXæ‘é•‡</div>
                <div style="width: 20%; font-size: 12px; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">ä¸ŠåŸåŒºXXé•‡XXæ‘2ç»„15å·</div>
                <div style="width: 12%; font-size: 12px; color: var(--text-secondary);">139****5678</div>
                <div style="width: 10%;"><span style="padding: 2px 6px; background-color: #f6ffed; color: var(--success-color); border-radius: 4px; font-size: 11px;">åŒ»ä¿</span></div>
                <div style="width: 28%; text-align: center; display: flex; gap: 5px; justify-content: center;">
                    <button class="view-btn" style="padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer; background-color: #e8f4ff; color: var(--primary-color); border: none; flex: 1; max-width: 60px;">æŸ¥çœ‹</button>
                    <button class="nav-btn" style="padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer; background-color: #f0fff4; color: var(--success-color); border: none; flex: 1; max-width: 60px;">å¯¼èˆª</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ä¸Šé—¨ååŠ©ç”³è¯·æ“ä½œé¡µé¢ -->
    <div class="content" id="evaluatorRegisterPage" style="display: none;">
        <div class="form-section" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);">
            <div class="section-title" style="font-size: 16px; font-weight: 500; margin-bottom: 15px; color: var(--text-color); padding-bottom: 10px; border-bottom: 2px solid var(--primary-color); display: flex; align-items: center;">
                <span style="display: inline-block; width: 3px; height: 16px; background-color: var(--primary-color); margin-right: 8px; border-radius: 1px;"></span>
                é€‰æ‹©çº¿ç´¢
            </div>
            <div class="form-item" style="display: flex; margin-bottom: 15px; align-items: flex-start;">
                <label class="form-label required" style="width: 90px; flex-shrink: 0; font-size: 14px; color: var(--text-color); padding-top: 10px; font-weight: 500;">é€‰æ‹©çº¿ç´¢</label>
                <div class="form-content" style="flex: 1;">
                    <select class="form-select" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 14px; background-color: #fff;">
                        <option value="">è¯·é€‰æ‹©å¾…ååŠ©ç”³è¯·çš„çº¿ç´¢</option>
                        <option value="1">æå›› - 330101********1234</option>
                        <option value="2">ç‹äº” - 330102********5678</option>
                    </select>
                </div>
            </div>
        </div>
        
        <div class="form-section" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);">
            <div class="section-title" style="font-size: 16px; font-weight: 500; margin-bottom: 15px; color: var(--text-color); padding-bottom: 10px; border-bottom: 2px solid var(--primary-color); display: flex; align-items: center;">
                <span style="display: inline-block; width: 3px; height: 16px; background-color: var(--primary-color); margin-right: 8px; border-radius: 1px;"></span>
                ååŠ©ç”³è¯·ä¿¡æ¯
            </div>
            <div class="form-item" style="display: flex; margin-bottom: 15px; align-items: flex-start;">
                <label class="form-label required" style="width: 90px; flex-shrink: 0; font-size: 14px; color: var(--text-color); padding-top: 10px; font-weight: 500;">ååŠ©ç”³è¯·æ—¥æœŸ</label>
                <div class="form-content" style="flex: 1;">
                    <input type="date" class="form-input" id="evaluateDate" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 14px; background-color: #fff; height: 40px;">
                </div>
            </div>
            <div class="form-item" style="display: flex; margin-bottom: 15px; align-items: flex-start;">
                <label class="form-label required" style="width: 90px; flex-shrink: 0; font-size: 14px; color: var(--text-color); padding-top: 10px; font-weight: 500;">ååŠ©ç”³è¯·ç»“æœ</label>
                <div class="form-content" style="flex: 1;">
                    <select class="form-select" style="width: 100%; padding: 10px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 14px; background-color: #fff;">
                        <option value="">è¯·é€‰æ‹©ç»“æœ</option>
                        <option value="qualified">ç¬¦åˆæ¡ä»¶</option>
                        <option value="unqualified">ä¸ç¬¦åˆæ¡ä»¶</option>
                    </select>
                </div>
            </div>
        </div>
        
        <button class="action-btn" onclick="showToast('åŠŸèƒ½å¼€å‘ä¸­ï¼Œè¯·ä½¿ç”¨PCç«¯å®Œæ•´åŠŸèƒ½')" style="display: block; width: 100%; padding: 12px; background-color: var(--primary-color); color: #fff; border: none; border-radius: 8px; font-size: 15px; font-weight: 500; cursor: pointer; margin-top: 15px;">æäº¤</button>
    </div>
    
    <!-- ç»“è®ºä¹¦é€è¾¾é¡µé¢ -->
    <div class="content" id="evaluatorConclusionPage" style="display: none;">
        <div class="list-title" style="font-size: 18px; font-weight: 500; margin-bottom: 15px; color: #333;">å¾…é€è¾¾ç»“è®ºä¹¦</div>
        
        <div class="list-item" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); display: flex; justify-content: space-between; align-items: center;">
            <div class="item-info" style="flex: 1;">
                <div class="item-name" style="font-size: 16px; font-weight: 500; margin-bottom: 5px;">å¼ ä¸‰</div>
                <div class="item-level" style="font-size: 12px; color: #666; margin-bottom: 3px;">
                    <span class="level-tag level-heavy" style="display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 11px; color: #fff; margin-right: 5px; background-color: #ff4d4f;">ä¸‰çº§</span>
                    ååŠ©ç”³è¯·æ—¥æœŸï¼š2025-10-15
                </div>
                <div class="item-date" style="font-size: 12px; color: #999;">ç»“æœï¼šç¬¦åˆæ¡ä»¶</div>
                <div class="item-id" style="font-size: 12px; color: #666; margin-top: 5px;">ğŸ“ ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå¼„XXå·</div>
            </div>
            <button class="item-btn" style="padding: 6px 12px; background-color: #2f80ed; color: #fff; border: none; border-radius: 4px; font-size: 13px; cursor: pointer; white-space: nowrap;">é€è¾¾</button>
        </div>
        
        <div class="list-item" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); display: flex; justify-content: space-between; align-items: center;">
            <div class="item-info" style="flex: 1;">
                <div class="item-name" style="font-size: 16px; font-weight: 500; margin-bottom: 5px;">æå››</div>
                <div class="item-level" style="font-size: 12px; color: #666; margin-bottom: 3px;">
                    <span class="level-tag level-medium" style="display: inline-block; padding: 2px 6px; border-radius: 4px; font-size: 11px; color: #fff; margin-right: 5px; background-color: #faad14;">äºŒçº§</span>
                    ååŠ©ç”³è¯·æ—¥æœŸï¼š2025-10-14
                </div>
                <div class="item-date" style="font-size: 12px; color: #999;">ç»“æœï¼šç¬¦åˆæ¡ä»¶</div>
                <div class="item-id" style="font-size: 12px; color: #666; margin-top: 5px;">ğŸ“ ä¸Šæµ·å¸‚å¾æ±‡åŒºXXè·¯XXå·</div>
            </div>
            <button class="item-btn" style="padding: 6px 12px; background-color: #2f80ed; color: #fff; border: none; border-radius: 4px; font-size: 13px; cursor: pointer; white-space: nowrap;">é€è¾¾</button>
        </div>
    </div>
    
    <!-- å›è®¿åŠŸèƒ½é¡µé¢ -->
    <div class="content" id="evaluatorVisitPage" style="display: none;">
        <!-- ç±»å‹åˆ‡æ¢æ  -->
        <div class="type-tab" style="position: fixed; top: 44px; left: 0; width: 100%; background-color: #fff; display: flex; border-bottom: 1px solid #eee; z-index: 998;">
            <div class="tab-item active" id="onlineVisitTabBtn" onclick="switchVisitTab('online')" style="flex: 1; text-align: center; padding: 12px 0; font-size: 15px; cursor: pointer; border-bottom: 3px solid var(--primary-color); color: var(--primary-color); font-weight: 500;">çº¿ä¸Šå›è®¿</div>
            <div class="tab-item" id="offlineVisitTabBtn" onclick="switchVisitTab('offline')" style="flex: 1; text-align: center; padding: 12px 0; font-size: 15px; cursor: pointer; border-bottom: 3px solid transparent; color: var(--text-color);">çº¿ä¸‹å›è®¿</div>
        </div>
        
        <div style="padding-top: 50px;">
            <div id="onlineVisitTab">
                <div class="list-item" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);">
                    <div class="item-info" style="flex: 1;">
                        <div class="item-name" style="font-size: 16px; font-weight: 500; margin-bottom: 5px;">å¼ ä¸‰</div>
                        <div class="item-level" style="font-size: 12px; color: #666; margin-bottom: 3px;">è®¡åˆ’æ—¥æœŸï¼š2025-10-20</div>
                        <div class="item-date" style="font-size: 12px; color: #999;">å›è®¿ç±»å‹ï¼šçº¿ä¸Šå›è®¿</div>
                        <div class="item-id" style="font-size: 12px; color: #666; margin-top: 5px;">ğŸ“ ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå¼„XXå· | ğŸ“ 138****5678</div>
                    </div>
                    <button class="item-btn" style="padding: 6px 12px; background-color: #2f80ed; color: #fff; border: none; border-radius: 4px; font-size: 13px; cursor: pointer; white-space: nowrap;">å›è®¿</button>
                </div>
                <div class="list-item" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);">
                    <div class="item-info" style="flex: 1;">
                        <div class="item-name" style="font-size: 16px; font-weight: 500; margin-bottom: 5px;">ç‹äº”</div>
                        <div class="item-level" style="font-size: 12px; color: #666; margin-bottom: 3px;">è®¡åˆ’æ—¥æœŸï¼š2025-10-22</div>
                        <div class="item-date" style="font-size: 12px; color: #999;">å›è®¿ç±»å‹ï¼šçº¿ä¸Šå›è®¿</div>
                        <div class="item-id" style="font-size: 12px; color: #666; margin-top: 5px;">ğŸ“ ä¸Šæµ·å¸‚é»„æµ¦åŒºXXè·¯XXå· | ğŸ“ 137****7890</div>
                    </div>
                    <button class="item-btn" style="padding: 6px 12px; background-color: #2f80ed; color: #fff; border: none; border-radius: 4px; font-size: 13px; cursor: pointer; white-space: nowrap;">å›è®¿</button>
                </div>
            </div>
            
            <div id="offlineVisitTab" style="display: none;">
                <div class="list-item" style="background-color: #fff; border-radius: 8px; padding: 15px; margin-bottom: 10px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);">
                    <div class="item-info" style="flex: 1;">
                        <div class="item-name" style="font-size: 16px; font-weight: 500; margin-bottom: 5px;">æå››</div>
                        <div class="item-level" style="font-size: 12px; color: #666; margin-bottom: 3px;">è®¡åˆ’æ—¥æœŸï¼š2025-10-21</div>
                        <div class="item-date" style="font-size: 12px; color: #999;">å›è®¿ç±»å‹ï¼šçº¿ä¸‹å›è®¿</div>
                        <div class="item-id" style="font-size: 12px; color: #666; margin-top: 5px;">ğŸ“ ä¸Šæµ·å¸‚å¾æ±‡åŒºXXè·¯XXå· | ğŸ“ 139****6789</div>
                    </div>
                    <button class="item-btn" style="padding: 6px 12px; background-color: #2f80ed; color: #fff; border: none; border-radius: 4px; font-size: 13px; cursor: pointer; white-space: nowrap;">å›è®¿</button>
                </div>
            </div>
        </div>
    </div>

    <!-- æç¤ºæ¡† -->
    <div class="toast" id="toast">æ“ä½œæˆåŠŸ</div>

    <!-- åº•éƒ¨åŠŸèƒ½èœå• -->
    <div class="tab-bar">
        <div class="tab-item active" onclick="navigateTo('home')">
            <div class="tab-icon">ğŸ </div>
            <div>é¦–é¡µ</div>
        </div>
        <div class="tab-item" onclick="navigateTo('serviceObject')">
            <div class="tab-icon">ğŸ‘¤</div>
            <div>æœåŠ¡å¯¹è±¡</div>
        </div>
        <div class="tab-item" onclick="navigateTo('nurseWork')">
            <div class="tab-icon">ğŸ‘©âš•ï¸</div>
            <div>æŠ¤ç†å‘˜</div>
        </div>
        <div class="tab-item" onclick="navigateTo('approval')">
            <div class="tab-icon">âœï¸</div>
            <div>æµç¨‹</div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentPage = 'home';
        let currentRejectId = null;
        
        // é¡µé¢å¯¼èˆª
        function navigateTo(page) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.getElementById('homePage').style.display = 'none';
            document.getElementById('serviceObjectPage').style.display = 'none';
            document.getElementById('objectDetailPage').style.display = 'none';
            document.getElementById('nurseWorkPage').style.display = 'none';
            document.getElementById('nurseDataPage').style.display = 'none';
            document.getElementById('approvalPage').style.display = 'none';
            document.getElementById('evaluatorCluePage').style.display = 'none';
            document.getElementById('evaluatorRegisterPage').style.display = 'none';
            document.getElementById('evaluatorConclusionPage').style.display = 'none';
            document.getElementById('evaluatorVisitPage').style.display = 'none';
            
            // æ›´æ–°å¯¼èˆªæ ‡é¢˜
            const navTitle = document.getElementById('pageTitle');
            switch(page) {
                case 'home':
                    navTitle.textContent = 'ç®¡ç†é¦–é¡µ';
                    document.getElementById('homePage').style.display = 'block';
                    break;
                case 'serviceObject':
                    navTitle.textContent = 'æœåŠ¡å¯¹è±¡ç®¡ç†';
                    document.getElementById('serviceObjectPage').style.display = 'block';
                    // é‡æ–°æ¸²æŸ“åˆ—è¡¨ä»¥æ›´æ–°æœåŠ¡æ¬¡æ•°
                    renderServiceObjectList();
                    break;
                case 'nurseWork':
                    navTitle.textContent = 'æŠ¤ç†å‘˜å·¥ä½œæŸ¥çœ‹';
                    document.getElementById('nurseWorkPage').style.display = 'block';
                    break;
                case 'approval':
                    navTitle.textContent = 'æµç¨‹ç®¡ç†';
                    document.getElementById('approvalPage').style.display = 'block';
                    // é»˜è®¤æ˜¾ç¤ºæ–°å‘èµ·æµç¨‹æ ‡ç­¾
                    switchProcessTab('new');
                    break;
                case 'evaluatorClue':
                    navTitle.textContent = 'å¾…ååŠ©ç”³è¯·çº¿ç´¢';
                    document.getElementById('evaluatorCluePage').style.display = 'block';
                    break;
                case 'evaluatorRegister':
                    navTitle.textContent = 'ä¸Šé—¨ååŠ©ç”³è¯·æ“ä½œ';
                    document.getElementById('evaluatorRegisterPage').style.display = 'block';
                    break;
                case 'evaluatorConclusion':
                    navTitle.textContent = 'ç»“è®ºä¹¦é€è¾¾';
                    document.getElementById('evaluatorConclusionPage').style.display = 'block';
                    break;
                case 'evaluatorVisit':
                    navTitle.textContent = 'å›è®¿åŠŸèƒ½';
                    document.getElementById('evaluatorVisitPage').style.display = 'block';
                    break;
            }
            
            // æ›´æ–°åº•éƒ¨æ ‡ç­¾
            const tabItems = document.querySelectorAll('.tab-item');
            tabItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('onclick').includes(page)) {
                    item.classList.add('active');
                }
            });
            
            currentPage = page;
        }
        
        // æŸ¥çœ‹æœåŠ¡å¯¹è±¡è¯¦æƒ…
        function viewObjectDetail(id) {
            document.getElementById('serviceObjectPage').style.display = 'none';
            document.getElementById('objectDetailPage').style.display = 'block';
            document.getElementById('pageTitle').textContent = 'æœåŠ¡å¯¹è±¡è¯¦æƒ…';
        }
        
        // æ‰“å¼€å¯¼èˆª
        function openNavigation(address) {
            if (!address) {
                showToast('åœ°å€ä¿¡æ¯ä¸å®Œæ•´');
                return;
            }
            
            // ä½¿ç”¨æ‰‹æœºç«¯åœ°å›¾å¯¼èˆª
            // ä¼˜å…ˆå°è¯•ä½¿ç”¨é«˜å¾·åœ°å›¾
            const amapUrl = `https://uri.amap.com/navigation?to=${encodeURIComponent(address)}&mode=car&policy=1&src=mypage&coordinate=gaode&callnative=1`;
            
            // å°è¯•æ‰“å¼€é«˜å¾·åœ°å›¾
            const amapLink = document.createElement('a');
            amapLink.href = amapUrl;
            amapLink.target = '_blank';
            amapLink.click();
            
            // å¦‚æœé«˜å¾·åœ°å›¾æœªå®‰è£…ï¼Œå°è¯•ä½¿ç”¨ç™¾åº¦åœ°å›¾
            setTimeout(() => {
                const baiduUrl = `https://api.map.baidu.com/direction?destination=${encodeURIComponent(address)}&mode=driving&region=å…¨å›½&output=html&src=webapp`;
                window.open(baiduUrl, '_blank');
            }, 500);
            
            showToast(`æ­£åœ¨æ‰“å¼€åœ°å›¾å¯¼èˆª...`);
        }
        
        // æŸ¥çœ‹æŠ¤ç†å‘˜å·¥ä½œæ•°æ®
        function viewNurseWork(id) {
            currentNurseId = id;
            document.getElementById('nurseWorkPage').style.display = 'none';
            document.getElementById('nurseDataPage').style.display = 'block';
            document.getElementById('pageTitle').textContent = 'æŠ¤ç†å‘˜å·¥ä½œæ•°æ®';
            
            // é‡ç½®ä¸ºæŒ‰æœˆæŸ¥çœ‹æ¨¡å¼
            switchViewMode('month');
        }
        
        // æŸ¥çœ‹å®Œæ•´è®°å½•
        function viewFullRecords() {
            showToast('è·³è½¬è‡³å®Œæ•´æœåŠ¡è®°å½•é¡µé¢');
        }
        
        // ========== è§’è‰²åˆ‡æ¢åŠŸèƒ½ ==========
        document.getElementById('roleSwitchBtn')?.addEventListener('click', function(e) {
            e.stopPropagation();
            const dropdown = document.getElementById('roleSwitchDropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        });

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­ä¸‹æ‹‰èœå•
        document.addEventListener('click', function(e) {
            const roleSwitchBtn = document.getElementById('roleSwitchBtn');
            if (roleSwitchBtn && !roleSwitchBtn.contains(e.target)) {
                const dropdown = document.getElementById('roleSwitchDropdown');
                if (dropdown) {
                    dropdown.classList.remove('show');
                }
            }
        });

        // è§’è‰²åˆ‡æ¢
        document.querySelectorAll('.role-switch-item').forEach(item => {
            item.addEventListener('click', function() {
                const rolePath = this.getAttribute('data-path');
                if (rolePath) {
                    window.location.href = rolePath;
                }
            });
        });

        // è¿”å›ä¸Šä¸€é¡µ
        function goBack() {
            if (currentPage === 'home') {
                showToast('å·²æ˜¯é¦–é¡µ');
            } else if (document.getElementById('objectDetailPage').style.display === 'block') {
                navigateTo('serviceObject');
            } else if (document.getElementById('nurseDataPage').style.display === 'block') {
                navigateTo('nurseWork');
            } else if (document.getElementById('evaluatorCluePage').style.display === 'block' ||
                       document.getElementById('evaluatorRegisterPage').style.display === 'block' ||
                       document.getElementById('evaluatorConclusionPage').style.display === 'block' ||
                       document.getElementById('evaluatorVisitPage').style.display === 'block') {
                navigateTo('home');
            } else {
                navigateTo('home');
            }
        }
        
        // åˆ‡æ¢æµç¨‹ç®¡ç†æ ‡ç­¾é¡µ
        function switchProcessTab(tab) {
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            document.getElementById('newProcessTab').style.display = 'none';
            document.getElementById('pendingProcessTab').style.display = 'none';
            document.getElementById('waitingProcessTab').style.display = 'none';
            document.getElementById('completedProcessTab').style.display = 'none';
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹
            switch(tab) {
                case 'new':
                    document.getElementById('newProcessTab').style.display = 'block';
                    break;
                case 'pending':
                    document.getElementById('pendingProcessTab').style.display = 'block';
                    break;
                case 'waiting':
                    document.getElementById('waitingProcessTab').style.display = 'block';
                    break;
                case 'completed':
                    document.getElementById('completedProcessTab').style.display = 'block';
                    break;
            }
            
            // æ›´æ–°æ ‡ç­¾æ ·å¼
            const tabs = document.querySelectorAll('#approvalPage .tab');
            tabs.forEach(t => {
                t.classList.remove('active');
                if (t.getAttribute('onclick').includes(tab)) {
                    t.classList.add('active');
                }
            });
        }
        
        // æ˜¾ç¤ºæµç¨‹è¡¨å•
        function showProcessForm() {
            const objectId = document.getElementById('processObjectSelect').value;
            const processType = document.getElementById('processTypeSelect').value;
            
            if (!objectId) {
                showToast('è¯·é€‰æ‹©æœåŠ¡å¯¹è±¡');
                return;
            }
            
            if (!processType) {
                showToast('è¯·é€‰æ‹©æµç¨‹ç±»å‹');
                return;
            }
            
            // è·å–æœåŠ¡å¯¹è±¡åç§°
            const objectSelect = document.getElementById('processObjectSelect');
            const objectName = objectSelect.options[objectSelect.selectedIndex].text.split(' - ')[0];
            
            // è®¾ç½®è¡¨å•æ•°æ®
            document.getElementById('processObjectId').value = objectId;
            document.getElementById('processObjectName').value = objectName;
            document.getElementById('processType').value = processType;
            
            // æµç¨‹ç±»å‹æ˜ å°„
            const reqTypeMap = {
                '1': 'æš‚åœç”³è¯·',
                '2': 'æ¢å¤ç”³è¯·',
                '3': 'è½¬å‡ºç”³è¯·',
                '4': 'è½¬å…¥ç”³è¯·',
                '5': 'æ­»äº¡ç”³è¯·',
                '6': 'æ°¸ä¹…æ”¾å¼ƒ'
            };
            
            document.getElementById('processFormTitle').textContent = `å‘èµ·${reqTypeMap[processType]} - ${objectName}`;
            
            // éšè—æ‰€æœ‰è¡¨å•åŒºåŸŸ
            document.getElementById('pauseFormSection').style.display = 'none';
            document.getElementById('resumeFormSection').style.display = 'none';
            document.getElementById('deathFormSection').style.display = 'none';
            document.getElementById('transferFormSection').style.display = 'none';
            document.getElementById('abandonFormSection').style.display = 'none';
            
            // æ˜¾ç¤ºå¯¹åº”çš„è¡¨å•åŒºåŸŸ
            if (processType === '1') {
                document.getElementById('pauseFormSection').style.display = 'block';
            } else if (processType === '2') {
                document.getElementById('resumeFormSection').style.display = 'block';
            } else if (processType === '5') {
                document.getElementById('deathFormSection').style.display = 'block';
            } else if (processType === '3') {
                document.getElementById('transferFormSection').style.display = 'block';
            } else if (processType === '6') {
                document.getElementById('abandonFormSection').style.display = 'block';
            }
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('processFormModal').classList.add('show');
        }
        
        // éšè—æµç¨‹è¡¨å•
        function hideProcessForm() {
            document.getElementById('processFormModal').classList.remove('show');
            document.getElementById('processForm').reset();
        }
        
        // åˆ‡æ¢å›è®¿ç±»å‹æ ‡ç­¾
        function switchVisitTab(type) {
            document.getElementById('onlineVisitTab').style.display = type === 'online' ? 'block' : 'none';
            document.getElementById('offlineVisitTab').style.display = type === 'offline' ? 'block' : 'none';
            
            // æ›´æ–°æ ‡ç­¾æ ·å¼
            const onlineBtn = document.getElementById('onlineVisitTabBtn');
            const offlineBtn = document.getElementById('offlineVisitTabBtn');
            
            if (type === 'online') {
                onlineBtn.classList.add('active');
                onlineBtn.style.borderBottomColor = 'var(--primary-color)';
                onlineBtn.style.color = 'var(--primary-color)';
                onlineBtn.style.fontWeight = '500';
                offlineBtn.classList.remove('active');
                offlineBtn.style.borderBottomColor = 'transparent';
                offlineBtn.style.color = 'var(--text-color)';
                offlineBtn.style.fontWeight = 'normal';
            } else {
                offlineBtn.classList.add('active');
                offlineBtn.style.borderBottomColor = 'var(--primary-color)';
                offlineBtn.style.color = 'var(--primary-color)';
                offlineBtn.style.fontWeight = '500';
                onlineBtn.classList.remove('active');
                onlineBtn.style.borderBottomColor = 'transparent';
                onlineBtn.style.color = 'var(--text-color)';
                onlineBtn.style.fontWeight = 'normal';
            }
        }
        
        // æäº¤æµç¨‹
        function submitProcess() {
            const processType = document.getElementById('processType').value;
            const objectId = document.getElementById('processObjectId').value;
            const objectName = document.getElementById('processObjectName').value;
            
            // éªŒè¯è¡¨å•
            let isValid = true;
            let errorMsg = '';
            
            if (processType === '1') {
                const startDate = document.getElementById('pauseStartDate').value;
                const reason = document.getElementById('pauseReason').value.trim();
                if (!startDate) {
                    isValid = false;
                    errorMsg = 'è¯·é€‰æ‹©æš‚åœå¼€å§‹æ—¥æœŸ';
                } else if (!reason) {
                    isValid = false;
                    errorMsg = 'è¯·è¾“å…¥æš‚åœåŸå› ';
                }
            } else if (processType === '2') {
                const resumeDate = document.getElementById('resumeDate').value;
                const reason = document.getElementById('resumeReason').value.trim();
                if (!resumeDate) {
                    isValid = false;
                    errorMsg = 'è¯·é€‰æ‹©æ¢å¤æ—¥æœŸ';
                } else if (!reason) {
                    isValid = false;
                    errorMsg = 'è¯·è¾“å…¥æ¢å¤åŸå› ';
                }
            } else if (processType === '5') {
                const deathDate = document.getElementById('deathDate').value;
                const reason = document.getElementById('deathReason').value.trim();
                if (!deathDate) {
                    isValid = false;
                    errorMsg = 'è¯·é€‰æ‹©æ­»äº¡æ—¥æœŸ';
                } else if (!reason) {
                    isValid = false;
                    errorMsg = 'è¯·è¾“å…¥æ­»äº¡åŸå› ';
                }
            } else if (processType === '3') {
                const transferDate = document.getElementById('transferDate').value;
                const reason = document.getElementById('transferReason').value.trim();
                if (!transferDate) {
                    isValid = false;
                    errorMsg = 'è¯·é€‰æ‹©è½¬å‡ºæ—¥æœŸ';
                } else if (!reason) {
                    isValid = false;
                    errorMsg = 'è¯·è¾“å…¥è½¬å‡ºåŸå› ';
                }
            } else if (processType === '6') {
                const abandonDate = document.getElementById('abandonDate').value;
                const reason = document.getElementById('abandonReason').value.trim();
                if (!abandonDate) {
                    isValid = false;
                    errorMsg = 'è¯·é€‰æ‹©æ”¾å¼ƒæ—¥æœŸ';
                } else if (!reason) {
                    isValid = false;
                    errorMsg = 'è¯·è¾“å…¥æ”¾å¼ƒåŸå› ';
                }
            }
            
            if (!isValid) {
                showToast(errorMsg);
                return;
            }
            
            // æäº¤æµç¨‹ï¼ˆå®é™…é¡¹ç›®ä¸­åº”è°ƒç”¨åç«¯APIï¼‰
            hideProcessForm();
            showToast('æµç¨‹å·²æäº¤ï¼Œç­‰å¾…å®¡æ‰¹');
            
            // é‡ç½®é€‰æ‹©
            document.getElementById('processObjectSelect').value = '';
            document.getElementById('processTypeSelect').value = '';
        }
        
        // æ˜¾ç¤ºé©³å›å¼¹çª—
        function showRejectModal(id) {
            currentRejectId = id;
            document.getElementById('rejectReason').value = '';
            document.getElementById('rejectModal').classList.add('show');
        }
        
        // éšè—é©³å›å¼¹çª—
        function hideRejectModal() {
            document.getElementById('rejectModal').classList.remove('show');
        }
        
        // ç¡®è®¤é©³å›
        function confirmReject() {
            const reason = document.getElementById('rejectReason').value.trim();
            if (!reason) {
                showToast('è¯·è¾“å…¥é©³å›åŸå› ');
                return;
            }
            
            hideRejectModal();
            // æ¨¡æ‹ŸAPIè°ƒç”¨æ›´æ–°å®¡æ‰¹çŠ¶æ€
            showToast('ç”³è¯·å·²é©³å›');
            
            // æ›´æ–°åˆ—è¡¨ï¼ˆå®é™…é¡¹ç›®ä¸­åº”é‡æ–°åŠ è½½æ•°æ®ï¼‰
            if (currentRejectId) {
                // è¿™é‡Œä»…åšæ¼”ç¤ºï¼Œå®é™…åº”ä»DOMä¸­ç§»é™¤æˆ–æ›´æ–°çŠ¶æ€
            }
        }
        
        // æ‰¹å‡†ç”³è¯·
        function approveApplication(id) {
            showToast('ç”³è¯·å·²æ‰¹å‡†');
            // æ¨¡æ‹ŸAPIè°ƒç”¨æ›´æ–°å®¡æ‰¹çŠ¶æ€
            // å®é™…é¡¹ç›®ä¸­åº”é‡æ–°åŠ è½½æ•°æ®
        }
        
        // æ—¥æœŸåˆ‡æ¢ï¼ˆæŠ¤ç†å‘˜æ•°æ®é¡µé¢ï¼‰
        let currentViewMode = 'month'; // 'month' æˆ– 'day'
        let currentNurseId = null;
        
        function prevDate() {
            if (currentViewMode === 'month') {
                showToast('æŸ¥çœ‹ä¸Šä¸€æœˆæ•°æ®');
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æœˆä»½åˆ‡æ¢é€»è¾‘
            } else {
                const dateInput = document.getElementById('dailyWorkorderDate');
                if (dateInput) {
                    const currentDate = new Date(dateInput.value || new Date());
                    currentDate.setDate(currentDate.getDate() - 1);
                    dateInput.value = currentDate.toISOString().split('T')[0];
                    loadDailyWorkorders();
                }
            }
        }
        
        function nextDate() {
            if (currentViewMode === 'month') {
                showToast('æŸ¥çœ‹ä¸‹ä¸€æœˆæ•°æ®');
                // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„æœˆä»½åˆ‡æ¢é€»è¾‘
            } else {
                const dateInput = document.getElementById('dailyWorkorderDate');
                if (dateInput) {
                    const currentDate = new Date(dateInput.value || new Date());
                    currentDate.setDate(currentDate.getDate() + 1);
                    dateInput.value = currentDate.toISOString().split('T')[0];
                    loadDailyWorkorders();
                }
            }
        }
        
        // åˆ‡æ¢æŸ¥çœ‹æ¨¡å¼
        function switchViewMode(mode) {
            currentViewMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.getElementById('monthModeBtn').classList.toggle('active', mode === 'month');
            document.getElementById('dayModeBtn').classList.toggle('active', mode === 'day');
            
            // æ˜¾ç¤º/éšè—å¯¹åº”çš„å†…å®¹
            document.getElementById('monthViewContent').style.display = mode === 'month' ? 'block' : 'none';
            document.getElementById('dailyWorkorderList').classList.toggle('show', mode === 'day');
            
            // å¦‚æœæ˜¯æŒ‰æ—¥æ¨¡å¼ï¼Œåˆå§‹åŒ–æ—¥æœŸé€‰æ‹©å™¨
            if (mode === 'day') {
                const dateInput = document.getElementById('dailyWorkorderDate');
                if (dateInput && !dateInput.value) {
                    dateInput.value = new Date().toISOString().split('T')[0];
                    loadDailyWorkorders();
                }
            }
        }
        
        // åŠ è½½æ¯æ—¥å·¥å•æ•°æ®
        function loadDailyWorkorders() {
            const dateInput = document.getElementById('dailyWorkorderDate');
            const contentDiv = document.getElementById('dailyWorkorderContent');
            
            if (!dateInput || !contentDiv) return;
            
            const selectedDate = dateInput.value;
            if (!selectedDate) {
                contentDiv.innerHTML = '<div class="empty-state">è¯·é€‰æ‹©æ—¥æœŸ</div>';
                return;
            }
            
            // æ¨¡æ‹Ÿæ•°æ®ï¼ˆå®é™…åº”ä»åç«¯APIè·å–ï¼‰
            const mockWorkorders = [
                {
                    id: 1,
                    clientName: 'å¼ ä¸‰',
                    status: 'completed',
                    planStartTime: '09:00',
                    planEndTime: '11:00',
                    actualStartTime: '09:05',
                    actualEndTime: '11:10',
                    duration: '2å°æ—¶5åˆ†é’Ÿ'
                },
                {
                    id: 2,
                    clientName: 'èµµå…­',
                    status: 'completed',
                    planStartTime: '14:00',
                    planEndTime: '16:00',
                    actualStartTime: '14:02',
                    actualEndTime: '16:05',
                    duration: '2å°æ—¶3åˆ†é’Ÿ'
                },
                {
                    id: 3,
                    clientName: 'å´å…«',
                    status: 'progress',
                    planStartTime: '17:00',
                    planEndTime: '19:00',
                    actualStartTime: '17:00',
                    actualEndTime: null,
                    duration: 'è¿›è¡Œä¸­'
                }
            ];
            
            if (mockWorkorders.length === 0) {
                contentDiv.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“‹</div>
                        <div class="empty-text">${selectedDate} æš‚æ— å·¥å•è®°å½•</div>
                    </div>
                `;
                return;
            }
            
            // æ¸²æŸ“å·¥å•åˆ—è¡¨
            let html = '';
            mockWorkorders.forEach(wo => {
                const statusClass = wo.status === 'completed' ? 'status-completed' : 
                                   wo.status === 'progress' ? 'status-progress' : 'status-pending';
                const statusText = wo.status === 'completed' ? 'å·²å®Œæˆ' : 
                                 wo.status === 'progress' ? 'è¿›è¡Œä¸­' : 'å¾…å¼€å§‹';
                
                html += `
                    <div class="daily-workorder-item">
                        <div class="workorder-header">
                            <div class="workorder-client">${wo.clientName}</div>
                            <div class="workorder-status ${statusClass}">${statusText}</div>
                        </div>
                        <div class="workorder-time">
                            <div class="workorder-time-row">
                                <span class="workorder-time-label">è®¡åˆ’æ—¶é—´ï¼š</span>
                                <span class="workorder-time-value">${wo.planStartTime} - ${wo.planEndTime}</span>
                            </div>
                            <div class="workorder-time-row">
                                <span class="workorder-time-label">å®é™…æ—¶é—´ï¼š</span>
                                <span class="workorder-time-value">${wo.actualStartTime}${wo.actualEndTime ? ' - ' + wo.actualEndTime : ' (è¿›è¡Œä¸­)'}</span>
                            </div>
                        </div>
                        <div class="workorder-duration">æœåŠ¡æ—¶é•¿ï¼š${wo.duration}</div>
                    </div>
                `;
            });
            
            contentDiv.innerHTML = html;
        }
        
        // æ˜¾ç¤ºæç¤ºæ¡†
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }
        
        // å¾…å®Œæˆå·¥ä½œæ•°æ®ï¼ˆç®¡ç†å‘˜APPï¼‰
        const pendingWorks = [
            {
                title: 'å¾…å®¡æ‰¹ç”³è¯·',
                desc: 'æ‚¨æœ‰3æ¡æš‚åœ/æ¢å¤æœåŠ¡ç”³è¯·éœ€è¦å®¡æ‰¹',
                count: 3,
                link: 'approval'
            },
            {
                title: 'å¾…å¤„ç†å·¥å•',
                desc: 'æ‚¨æœ‰5ä¸ªå·¥å•éœ€è¦ä»Šæ—¥å¤„ç†',
                count: 5,
                link: null
            },
            {
                title: 'å¾…å®¡æ ¸ææ–™',
                desc: 'æ‚¨æœ‰2ä»½ææ–™éœ€è¦å®¡æ ¸',
                count: 2,
                link: null
            }
        ];
        
        // æ›´æ–°é€šçŸ¥å¾½ç« 
        function updateNotificationBadge() {
            const totalCount = pendingWorks.reduce((sum, work) => sum + work.count, 0);
            const badge = document.getElementById('notificationBadge');
            if (totalCount > 0) {
                badge.textContent = totalCount > 99 ? '99+' : totalCount;
                badge.style.display = 'block';
            } else {
                badge.style.display = 'none';
            }
        }
        
        // æ¸²æŸ“å¾…å®Œæˆå·¥ä½œåˆ—è¡¨
        function renderPendingWorks() {
            const body = document.getElementById('workReminderBody');
            body.innerHTML = '';
            
            if (pendingWorks.length === 0) {
                body.innerHTML = '<div style="text-align: center; padding: 40px 0; color: #999;">æš‚æ— å¾…å®Œæˆå·¥ä½œ</div>';
                return;
            }
            
            pendingWorks.forEach(work => {
                const item = document.createElement('div');
                item.className = 'work-item';
                item.onclick = () => {
                    if (work.link) {
                        navigateTo(work.link);
                        closeWorkReminder();
                    }
                };
                item.style.cursor = work.link ? 'pointer' : 'default';
                item.innerHTML = `
                    <div class="work-item-title">
                        ${work.title}
                        ${work.count > 0 ? `<span class="work-item-count">${work.count}</span>` : ''}
                    </div>
                    <div class="work-item-desc">${work.desc}</div>
                `;
                body.appendChild(item);
            });
        }
        
        // æ˜¾ç¤ºå¾…å®Œæˆå·¥ä½œæé†’
        function showWorkReminder() {
            renderPendingWorks();
            const modal = document.getElementById('workReminderModal');
            modal.classList.add('show');
        }
        
        // å…³é—­å¾…å®Œæˆå·¥ä½œæé†’
        function closeWorkReminder() {
            const modal = document.getElementById('workReminderModal');
            modal.classList.remove('show');
        }
        
        // ========== æœåŠ¡ä¸è¶³çªå‡ºæ˜¾ç¤ºåŠŸèƒ½ ==========
        // é…ç½®æ•°æ®ï¼ˆä»æ•°æ®åº“sys_config_valueè¡¨è·å–ï¼Œid=8ï¼‰
        let minWeeklyServiceCount = 2; // é»˜è®¤å€¼ï¼šæ¯å‘¨æœ€å°‘æœåŠ¡æ¬¡æ•°
        
        // åŠ è½½é…ç½®æ•°æ®
        function loadConfig() {
            // æ¨¡æ‹Ÿä»æ•°æ®åº“åŠ è½½é…ç½®æ•°æ®
            // å®é™…é¡¹ç›®ä¸­åº”è¯¥é€šè¿‡APIè·å–
            const configData = [
                { id: 1, conf_name: 'åŒ»ä¿ç»“ç®—å·¥æ—¶å•ä»·', conf_value: 60 },
                { id: 2, conf_name: 'æŠ¤ç†å‘˜ç»“ç®—å·¥æ—¶å•ä»·', conf_value: 30 },
                { id: 3, conf_name: 'æœ€çŸ­å·¥æ—¶(åˆ†é’Ÿ)', conf_value: 60 },
                { id: 4, conf_name: 'å·¥æ—¶å•ä½(åˆ†é’Ÿ)', conf_value: 30 },
                { id: 5, conf_name: 'æœ€é•¿å·¥æ—¶(åˆ†é’Ÿ)', conf_value: 120 },
                { id: 6, conf_name: 'å·¥å•ç­¾å…¥æ—¶é—´å…è®¸æœ€å¤§è¯¯å·®(åˆ†é’Ÿ)', conf_value: 30 },
                { id: 7, conf_name: 'åŒ»ä¿ç»“ç®—ä¿ç•™æ¯”ä¾‹(%)', conf_value: 5 },
                { id: 8, conf_name: 'æ¯å‘¨æœ€å°‘æœåŠ¡æ¬¡æ•°', conf_value: 2 }
            ];
            
            const weeklyServiceConfig = configData.find(c => c.id === 8);
            if (weeklyServiceConfig) {
                minWeeklyServiceCount = weeklyServiceConfig.conf_value;
            }
        }
        
        // è·å–æœ¬å‘¨çš„æ—¥æœŸèŒƒå›´ï¼ˆå‘¨ä¸€åˆ°å‘¨æ—¥ï¼‰
        function getWeekRange() {
            const today = new Date();
            const dayOfWeek = today.getDay(); // 0=å‘¨æ—¥, 1=å‘¨ä¸€, ..., 6=å‘¨å…­
            const startOfWeek = new Date(today);
            // è®¡ç®—æœ¬å‘¨ä¸€
            if (dayOfWeek === 0) {
                startOfWeek.setDate(today.getDate() - 6); // å¦‚æœæ˜¯å‘¨æ—¥ï¼Œæœ¬å‘¨ä¸€æ˜¯6å¤©å‰
            } else {
                startOfWeek.setDate(today.getDate() - dayOfWeek + 1); // æœ¬å‘¨ä¸€
            }
            startOfWeek.setHours(0, 0, 0, 0);
            
            const endOfWeek = new Date(startOfWeek);
            endOfWeek.setDate(startOfWeek.getDate() + 6); // æœ¬å‘¨æ—¥
            endOfWeek.setHours(23, 59, 59, 999);
            
            return { start: startOfWeek, end: endOfWeek };
        }
        
        // æ ¼å¼åŒ–æ—¥æœŸä¸º YYYY-MM-DD
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // è®¡ç®—æœåŠ¡å¯¹è±¡æœ¬å‘¨çš„æœåŠ¡æ¬¡æ•°ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰
        function calculateWeeklyServiceCount(objectId) {
            // æ¨¡æ‹ŸæœåŠ¡è®°å½•æ•°æ®ï¼ˆå®é™…åº”ä»åç«¯APIè·å–ï¼‰
            const mockServiceRecords = {
                1: [{ date: '2025-10-20', status: 'completed' }], // å¼ ä¸‰ï¼šæœ¬å‘¨1æ¬¡
                2: [{ date: '2025-10-20', status: 'completed' }, { date: '2025-10-18', status: 'completed' }], // æå››ï¼šæœ¬å‘¨2æ¬¡
                3: [], // ç‹äº”ï¼šæœ¬å‘¨0æ¬¡ï¼ˆæœåŠ¡ä¸è¶³ï¼‰
                4: [{ date: '2025-10-19', status: 'completed' }], // èµµå…­ï¼šæœ¬å‘¨1æ¬¡ï¼ˆæœåŠ¡ä¸è¶³ï¼‰
                5: [{ date: '2025-10-20', status: 'completed' }, { date: '2025-10-18', status: 'completed' }, { date: '2025-10-16', status: 'completed' }] // å­™ä¸ƒï¼šæœ¬å‘¨3æ¬¡
            };
            
            const weekRange = getWeekRange();
            const weekStartStr = formatDate(weekRange.start);
            const weekEndStr = formatDate(weekRange.end);
            
            const records = mockServiceRecords[objectId] || [];
            let serviceCount = 0;
            
            records.forEach(record => {
                if (record.date >= weekStartStr && record.date <= weekEndStr && record.status === 'completed') {
                    serviceCount++;
                }
            });
            
            return serviceCount;
        }
        
        // æœåŠ¡å¯¹è±¡æ•°æ®
        const serviceObjectsData = [
            { id: 1, name: 'å¼ ä¸‰', level: 'é‡åº¦å¤±èƒ½ï¼ˆä¸‰çº§ï¼‰', nurse: 'ææŠ¤ç†', address: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå¼„XXå·', phone: '138****5678' },
            { id: 2, name: 'æå››', level: 'ä¸­åº¦å¤±èƒ½ï¼ˆäºŒçº§ï¼‰', nurse: 'ç‹æŠ¤ç†', address: 'ä¸Šæµ·å¸‚å¾æ±‡åŒºXXè·¯XXå·', phone: '139****6789' },
            { id: 3, name: 'ç‹äº”', level: 'è½»åº¦å¤±èƒ½ï¼ˆä¸€çº§ï¼‰', nurse: 'å¼ æŠ¤ç†', address: 'ä¸Šæµ·å¸‚é»„æµ¦åŒºXXè·¯XXå·', phone: '137****7890' },
            { id: 4, name: 'èµµå…­', level: 'é‡åº¦å¤±èƒ½ï¼ˆä¸‰çº§ï¼‰', nurse: 'ææŠ¤ç†', address: 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒºXXè·¯XXå·', phone: '136****8901' },
            { id: 5, name: 'å­™ä¸ƒ', level: 'ä¸­åº¦å¤±èƒ½ï¼ˆäºŒçº§ï¼‰', nurse: 'ç‹æŠ¤ç†', address: 'ä¸Šæµ·å¸‚å¾æ±‡åŒºXXè·¯XXå·', phone: '135****9012' }
        ];
        
        // æ¸²æŸ“æœåŠ¡å¯¹è±¡åˆ—è¡¨
        function renderServiceObjectList() {
            const recentContainer = document.getElementById('recentViewList');
            const listContainer = document.getElementById('objectListContainer');
            
            if (!recentContainer || !listContainer) return;
            
            // æ¸²æŸ“æœ€è¿‘æŸ¥çœ‹ï¼ˆå‰2ä¸ªï¼‰
            recentContainer.innerHTML = '';
            serviceObjectsData.slice(0, 2).forEach(obj => {
                const weeklyCount = calculateWeeklyServiceCount(obj.id);
                const isInsufficient = weeklyCount < minWeeklyServiceCount;
                
                const item = document.createElement('div');
                item.className = 'list-item' + (isInsufficient ? ' service-insufficient' : '');
                item.onclick = () => viewObjectDetail(obj.id);
                
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">
                            ${obj.name}
                            ${isInsufficient ? `<span class="service-insufficient-badge" title="æœ¬å‘¨æœåŠ¡${weeklyCount}æ¬¡ï¼Œä¸è¶³${minWeeklyServiceCount}æ¬¡">æœåŠ¡ä¸è¶³</span>` : ''}
                        </div>
                        <div class="item-subtitle">${obj.level} | æŠ¤ç†å‘˜ï¼š${obj.nurse}</div>
                        ${isInsufficient ? `<div class="service-count-info">âš ï¸ æœ¬å‘¨æœåŠ¡ï¼š${weeklyCount}æ¬¡ï¼ˆåº”${minWeeklyServiceCount}æ¬¡ï¼‰</div>` : ''}
                        <div class="item-subtitle" style="margin-top: 4px; font-size: 12px; color: var(--text-secondary);">
                            ğŸ“ ${obj.address} | ğŸ“ ${obj.phone}
                        </div>
                    </div>
                    <div class="item-arrow">â†’</div>
                `;
                recentContainer.appendChild(item);
            });
            
            // æ¸²æŸ“å…¨éƒ¨åˆ—è¡¨
            listContainer.innerHTML = '';
            serviceObjectsData.slice(2).forEach(obj => {
                const weeklyCount = calculateWeeklyServiceCount(obj.id);
                const isInsufficient = weeklyCount < minWeeklyServiceCount;
                
                const item = document.createElement('div');
                item.className = 'list-item' + (isInsufficient ? ' service-insufficient' : '');
                item.onclick = () => viewObjectDetail(obj.id);
                
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">
                            ${obj.name}
                            ${isInsufficient ? `<span class="service-insufficient-badge" title="æœ¬å‘¨æœåŠ¡${weeklyCount}æ¬¡ï¼Œä¸è¶³${minWeeklyServiceCount}æ¬¡">æœåŠ¡ä¸è¶³</span>` : ''}
                        </div>
                        <div class="item-subtitle">${obj.level} | æŠ¤ç†å‘˜ï¼š${obj.nurse}</div>
                        ${isInsufficient ? `<div class="service-count-info">âš ï¸ æœ¬å‘¨æœåŠ¡ï¼š${weeklyCount}æ¬¡ï¼ˆåº”${minWeeklyServiceCount}æ¬¡ï¼‰</div>` : ''}
                        <div class="item-subtitle" style="margin-top: 4px; font-size: 12px; color: var(--text-secondary);">
                            ğŸ“ ${obj.address} | ğŸ“ ${obj.phone}
                        </div>
                    </div>
                    <div class="item-arrow">â†’</div>
                `;
                listContainer.appendChild(item);
            });
        }
        
        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.onload = function() {
            // åŠ è½½é…ç½®æ•°æ®
            loadConfig();
            
            updateNotificationBadge();
            renderPendingWorks();
            navigateTo('home');
            
            // æ¸²æŸ“æœåŠ¡å¯¹è±¡åˆ—è¡¨
            renderServiceObjectList();
            
            // æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½æ˜¾ç¤ºå¼¹çª—ï¼ˆå¦‚æœæœ‰å¾…å®Œæˆå·¥ä½œï¼‰
            if (pendingWorks.length > 0) {
                setTimeout(() => {
                    showWorkReminder();
                }, 500);
            }
            
            // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­
            document.getElementById('workReminderModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeWorkReminder();
                }
            });
        };
    </script>
</body>
</html>